#!/usr/bin/env node

'use strict';

const app = require('../app')({
    loadConfig:true,
    initCliOptions: false,
    initSession: false,
    initDb: true,
    initI18n: true,
    initViews: false,
    initLogger: true,
    loadComponents: true,
    loadNavigation: false,
    setupHttpRouting: false
});
const mongoose = require('mongoose');
const debug = require('debug')('3DPTools:server');
const consign = require('consign');

app.program = require('commander');
app.cliStop = () => {
    mongoose.connection.close();
};

app.program
    .version(app.config.get('version'));

// Autoload CLI controllers
consign({
    verbose: false
}).include('cli')
    .into(app);

app.program.parse(process.argv);

if (!app.program.args.length) {
    app.program.help();
}
